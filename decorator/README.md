# 装饰者模式

## 意图

动态的将责任附加到对象上，想要扩展功能，装饰者提供有别于继承的另一种选择。p79

## 结构图

![image](https://github.com/yantianpi/designMode/raw/master/decorator/structure.png)

## 装饰者中角色介绍

* 抽象组件（Component）角色，定义一个对象接口，以规范准备接收附加职责的对象，从而可以给这些对象动态添加职责
* 具体组件（ConcreteComponent）角色，定义一个接收附加职责的类
* 装饰（Decorator）角色，装饰者和被装饰者具有相同的类型（采用继承方式，继承是为了有正确的类型，而不是继承行为），具体装饰由子类去完成
* 具体装饰（ConcreteComponent）角色，持有一个指向Component对象的引用，负责给组件对象增加附加职责

## 优点

* 比静态继承更灵活
* 基本组件的特征不需要太多，特征可以使用具体装饰类包装

## 缺点

* 装饰模式会产生很多对象,这些对象看上去很相似，不方便排错

## 适用场景

* 在不影响其他对象的前提下，可以动态的给对象添加职责
* 职责之间可以随意组合，相互不依赖，比如饮料中的咖啡，摩卡咖啡，摩卡加奶泡咖啡，双份摩卡加奶泡加豆浆咖啡

## 与其他模式对比

* 适配器模式，适配器模式主要是将旧接口适配到新接口上，装饰者模式是将对象包起来，添加新的功能行为

[参考](http://www.phppan.com/2010/06/php-design-pattern-4-decorator/)