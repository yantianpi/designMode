# 模板方法模式

## 意图

在一个方法中定义一个算法的骨架，而将一些步骤延迟到子类中，模板方法可以使得子类在不改变算法结构的情况下，重新定义算法中的某些步骤。p277

## 结构图

![image](https://github.com/yantianpi/designMode/raw/master/template/structure.png)

## 模板方法中角色介绍

* 抽象模板（AbstractTemplate）角色，定义一个或多个抽象方法让子类去实现，这些抽象方法是顶层逻辑的组成部分，定义一个模板方法，这个模板方法是个具体的方法，它给出了顶层逻辑的骨架，逻辑的组成步骤在对应的抽象操作当中，这些操作会推迟到子类中去实现，同时顶层逻辑也可以调用具体的实现方法。
* 具体模板方法（ConcreteTemplate）角色，实现父类的一个或多个抽象方法，作为顶层逻辑的组成而存在。每个抽象模板可以有多个具体模板与之对应，每个具体模板有其自己对抽象方法（顶层逻辑的组成部分）的实现，从而使得顶层逻辑的实现各不相同。

## 模板方法优点

* 代码复用

## 模板方法缺点

* 顶层如果设计的不好，对后期修改不利

## 实现过程

准备一个抽象类，模板方法定义了一个算法,这个算法由一系列步骤构成。这些步骤里可以有具体的方法，具体构造子的形式实现，抽象方法。抽象方法迫使子类实现剩余的步骤逻辑，不同子类可以根据具体需求来实现这些抽象方法，从而对剩余步骤逻辑有不同的实现

## 钩子

钩子是一种方法，在抽象类中不做事或做默认的事，子类可以选择要不要去覆盖它

## 实现原则

将行为移到高端，将状态移到低端

## 与其他模式对比

* 与策略模式对比，策略模式放弃了算法的控制；模板方法模式维持算法的结构不变，个别步骤可以有不同的实现细节

[参考](http://www.phppan.com/2010/09/php-design-pattern-16-template-method/)